<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <Style>
        *{
            margin: 0;
            overflow: hidden;
        }
    </Style>
</head>
<body>
    <div id="webgl-ani"></div>
    <script src = https://cdnjs.cloudflare.com/ajax/libs/dat-gui/0.7.7/dat.gui.js></script>
<script type="module">
    import * as THREE from 'https://unpkg.com/three@0.141.0/build/three.module.js';
    import { OrbitControls } from 'https://cdn.jsdelivr.net/npm/three@0.121.1/examples/jsm/controls/OrbitControls.js';

  (function(){

     init()

})()
 function init(){
var requestID;
var scene = new THREE.Scene();
var camera = new THREE.PerspectiveCamera(45,
window.innerWidth/window.innerHeight,0.2,1000);
var renderer = new THREE.WebGLRenderer();
    renderer.setClearColor(new THREE.Color(0x000000));
    renderer.setSize(window.innerWidth,window.innerHeight);
    renderer.shadowMap.enabled = true;


    const color = 0xFFFFFF;
const intensity = 1;
// 빛을 생성해서
var light1 = new THREE.PointLight( 0xffffff, 1, 100 );
// 위치를 적당한 지점에 놓고
light1.position.set( 5, 5, 5 );
// 장면에 추가합니다.
scene.add( light1 );

// 빛을 또한 생성해서
var light2 = new THREE.PointLight( 0xffFFFF, 1, 100 );
// 위치를 적당한 지점에 놓고
light2.position.set( 7, -5, 6 );
// 장면에 추가합니다.
scene.add( light2 );

// 빛을 또한 생성해서
var light3 = new THREE.PointLight( 0xffffff, 1, 100 );
// 위치를 적당한 지점에 놓고
light3.position.set( -7, 3, 3 );
// 장면에 추가합니다.
scene.add( light3 );
// 전체 조명을 추가합니다.
var light_base = new THREE.AmbientLight( 0xf0f0f0 );
scene.add( light_base );


const books = new THREE.Object3D();
scene.add(books)

var planeGeometry = new THREE.PlaneGeometry(100,100);
var planeMaterial = new THREE.MeshBasicMaterial({
    color:0x8B5927,
    side:THREE.DoubleSide,
})
var planeGeometry1 = new THREE.PlaneGeometry(20,50,10);
var planeMaterial1 = new THREE.MeshBasicMaterial({
    color:0xFAFAD2,
    side:THREE.DoubleSide,
})
var planeGeometry2 = new THREE.Object3D();
var planeMaterial2 = new THREE.MeshBasicMaterial({
    color:0xFAFAD2,
    side:THREE.DoubleSide,
})

const geometry = new THREE.BoxGeometry( 50, 0, 50 );
const material = new THREE.MeshBasicMaterial( {color: 0x906D3B, side : THREE.DoubleSide} );
const cube = new THREE.Mesh( geometry, material );
cube.position.set(0,2,4)

scene.add( cube );

var plane2 = new THREE.Mesh(planeGeometry1,planeMaterial2)
plane2.position.set(9,4,4);
plane2.rotation.x = -0.5*Math.PI;


var plane1 = new THREE.Mesh(planeGeometry1,planeMaterial1)
plane1.position.set(-9,4,4);
plane1.rotation.x = -0.5*Math.PI;


var plane = new THREE.Mesh(planeGeometry,planeMaterial);
plane.position.set(0,-5,4);
plane.rotation.x = -0.5*Math.PI;
plane.receiveShadow = true;

books.add(plane);
books.add(planeGeometry2);
planeGeometry2.add(plane2);

var axes = new THREE.AxesHelper(20);
axes.position.set(0,0,10);
scene.add(axes);
scene.add(plane,plane1,plane2);


camera.position.set(0,100,-4);
  camera.lookAt(scene.position);

   var step = 0;
   var size = -9;
  document.getElementById('webgl-ani').appendChild(renderer.domElement)
  renderScene();  

  plane1.rotation.y = 0.1;
  plane2.rotation.y =-0.1;

  new OrbitControls(camera,renderer.domElement)
  const mouse = {
      x: undefined,
      y: undefined
    }
function renderScene(){
    step +=0.01
    plane1.position.x = ( -9 * (Math.cos(step)-0.05)-2);
    plane1.position.y = 3 + ( 10 * Math.abs(Math.sin(step))+1);
    plane1.rotation.y += 0.008;

    console.log(plane1.rotation.y)
    renderer.render(scene,camera)
    if(plane1.rotation.y <2.8)
    requestID = requestAnimationFrame(renderScene);
};

addEventListener('click',(e)=>{

})
}

// let a = false;
/* if(a == false){
    addEventListener('click',(e)=>{
    cancelAnimationFrame(requestID)
    a = true
})
} else if (a==true) {
    addEventListener('click',(e)=>{
    restartAnimationFrame(requestID)
    a = false
    })
} */



</script>
</body>
</html>